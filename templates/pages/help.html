{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title }} - AgriBazaar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'css/styleH.css' %}">
    <style>
        .help-hero {
            background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 50%, #4caf50 100%);
            color: white;
            padding: 80px 0;
            position: relative;
            overflow: hidden;
        }
        .help-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="help" width="30" height="30" patternUnits="userSpaceOnUse"><circle cx="15" cy="15" r="3" fill="white" opacity="0.08"/><rect x="5" y="5" width="8" height="8" fill="white" opacity="0.05"/></pattern></defs><rect width="100" height="100" fill="url(%23help)"/></svg>') repeat;
        }
        
        .search-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: -50px;
            position: relative;
            z-index: 10;
        }
        
        .topic-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.4s ease;
            border: 2px solid transparent;
            cursor: pointer;
        }
        .topic-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-color: #28a745;
        }
        
        .help-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin: 0 auto 25px;
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.2);
        }
        
        .faq-item {
            background: white;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .faq-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.12);
        }
        .faq-button {
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            padding: 20px;
            font-size: 1.1rem;
            font-weight: 500;
            color: #333;
            transition: all 0.3s ease;
        }
        .faq-button:hover {
            background: #f8f9fa;
            color: #28a745;
        }
        .faq-button:not(.collapsed) {
            background: #e8f5e8;
            color: #28a745;
        }
        
        .contact-method {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            height: 100%;
            transition: all 0.3s ease;
        }
        .contact-method:hover {
            background: #e8f5e8;
            transform: translateY(-5px);
        }
        
        .quick-action {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        .quick-action:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-online { background: #28a745; }
        .status-busy { background: #ffc107; }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .help-hero {
                padding: 60px 0;
            }
            .search-container {
                margin-top: -30px;
                padding: 15px;
                border-radius: 15px;
            }
            .topic-card {
                padding: 20px;
                margin-bottom: 20px;
            }
            .help-icon {
                width: 60px;
                height: 60px;
                font-size: 2rem;
                margin-bottom: 15px;
            }
            .contact-method {
                padding: 20px;
                margin-bottom: 15px;
            }
        }
        
        @media (max-width: 576px) {
            .help-hero {
                padding: 40px 0;
            }
            .help-hero h1 {
                font-size: 2.5rem;
            }
            .search-container {
                margin: -20px 15px 0;
                padding: 15px;
            }
            .topic-card {
                padding: 15px;
                margin-bottom: 15px;
            }
            .faq-button {
                padding: 15px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'home' %}">AgriBazaar</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="{% url 'home' %}"><i class="bi bi-house me-1"></i>Home</a>
                    {% if user.is_authenticated %}
                        <a class="nav-link" href="{% url 'buyer_dashboard' %}"><i class="bi bi-speedometer2 me-1"></i>Dashboard</a>
                    {% else %}
                        <a class="nav-link" href="{% url 'login' %}"><i class="bi bi-box-arrow-in-right me-1"></i>Login</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="help-hero position-relative">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-lg-8">
                    <h1 class="display-3 fw-bold mb-4">
                        <i class="bi bi-question-circle me-3"></i>{{ page_content.heading }}
                    </h1>
                    <p class="lead mb-4 fs-4">{{ page_content.description }}</p>
                    <p class="mb-0 opacity-90 fs-5">Search our knowledge base or browse categories below to find the answers you need</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <div class="container">
        <div class="search-container">
            <form class="d-flex">
                <div class="input-group input-group-lg">
                    <span class="input-group-text bg-success text-white border-success">
                        <i class="bi bi-search"></i>
                    </span>
                    <input type="text" class="form-control border-success" placeholder="Search for help articles, guides, or FAQs..." id="helpSearch">
                    <button class="btn btn-success px-4" type="submit">
                        <i class="bi bi-search me-2"></i>Search
                    </button>
                </div>
            </form>
            
            <div class="mt-3">
                <small class="text-muted">Popular searches:</small>
                <span class="badge bg-light text-dark ms-2">Account Setup</span>
                <span class="badge bg-light text-dark ms-1">Payment Issues</span>
                <span class="badge bg-light text-dark ms-1">Order Tracking</span>
                <span class="badge bg-light text-dark ms-1">Return Policy</span>
            </div>
        </div>
    </div>

    <!-- Help Topics -->
    <section class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-6 text-success fw-bold">Browse Help Topics</h2>
                <p class="lead text-muted">Find answers organized by category</p>
            </div>

            <div class="row g-4">
                {% for topic in page_content.topics %}
                <div class="col-lg-6 col-md-6 mb-4">
                    <div class="topic-card h-100">
                        <div class="text-center">
                            {% if topic == 'Account Management' %}
                                <div class="help-icon">
                                    <i class="bi bi-person-gear"></i>
                                </div>
                                <h4 class="text-success mb-3">{{ topic }}</h4>
                                <p class="text-muted mb-4">Manage your profile, security settings, and account preferences</p>
                                <div class="row text-start">
                                    <div class="col-12">
                                        <ul class="list-unstyled">
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Creating an account</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Password reset</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Profile settings</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Account verification</li>
                                            <li class="mb-0"><i class="bi bi-arrow-right text-success me-2"></i>Security settings</li>
                                        </ul>
                                    </div>
                                </div>
                            {% elif topic == 'Orders & Payments' %}
                                <div class="help-icon">
                                    <i class="bi bi-credit-card"></i>
                                </div>
                                <h4 class="text-success mb-3">{{ topic }}</h4>
                                <p class="text-muted mb-4">Get help with placing orders, payments, and tracking deliveries</p>
                                <div class="row text-start">
                                    <div class="col-12">
                                        <ul class="list-unstyled">
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Placing an order</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Payment methods</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Order tracking</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Delivery options</li>
                                            <li class="mb-0"><i class="bi bi-arrow-right text-success me-2"></i>Invoice & receipts</li>
                                        </ul>
                                    </div>
                                </div>
                            {% elif topic == 'Product Questions' %}
                                <div class="help-icon">
                                    <i class="bi bi-box"></i>
                                </div>
                                <h4 class="text-success mb-3">{{ topic }}</h4>
                                <p class="text-muted mb-4">Learn about our agricultural products, specifications, and usage</p>
                                <div class="row text-start">
                                    <div class="col-12">
                                        <ul class="list-unstyled">
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Product categories</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Quality standards</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Usage instructions</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Storage guidelines</li>
                                            <li class="mb-0"><i class="bi bi-arrow-right text-success me-2"></i>Bulk ordering</li>
                                        </ul>
                                    </div>
                                </div>
                            {% elif topic == 'Technical Support' %}
                                <div class="help-icon">
                                    <i class="bi bi-tools"></i>
                                </div>
                                <h4 class="text-success mb-3">{{ topic }}</h4>
                                <p class="text-muted mb-4">Resolve technical issues and get help with platform features</p>
                                <div class="row text-start">
                                    <div class="col-12">
                                        <ul class="list-unstyled">
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Website navigation</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Mobile app issues</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Browser compatibility</li>
                                            <li class="mb-2"><i class="bi bi-arrow-right text-success me-2"></i>Error messages</li>
                                            <li class="mb-0"><i class="bi bi-arrow-right text-success me-2"></i>Feature tutorials</li>
                                        </ul>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Quick Actions -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-6 text-success fw-bold">Quick Actions</h2>
                <p class="lead text-muted">Get help fast with these common tasks</p>
            </div>

            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="quick-action">
                        <i class="bi bi-box-arrow-in-right display-4 mb-3"></i>
                        <h5 class="mb-2">Track Order</h5>
                        <p class="small mb-3">Check the status of your recent purchases</p>
                        <a href="#" class="btn btn-light btn-sm">Track Now</a>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="quick-action">
                        <i class="bi bi-arrow-return-left display-4 mb-3"></i>
                        <h5 class="mb-2">Return Item</h5>
                        <p class="small mb-3">Start the return process for your purchase</p>
                        <a href="{% url 'returns_centre' %}" class="btn btn-light btn-sm">Return</a>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="quick-action">
                        <i class="bi bi-person-gear display-4 mb-3"></i>
                        <h5 class="mb-2">Update Profile</h5>
                        <p class="small mb-3">Modify your account information</p>
                        <a href="#" class="btn btn-light btn-sm">Edit Profile</a>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="quick-action">
                        <i class="bi bi-shield-check display-4 mb-3"></i>
                        <h5 class="mb-2">Report Issue</h5>
                        <p class="small mb-3">Get help with purchase protection</p>
                        <a href="{% url 'purchase_protection' %}" class="btn btn-light btn-sm">Report</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-6 text-success fw-bold">Frequently Asked Questions</h2>
                <p class="lead text-muted">Quick answers to common questions</p>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="accordion" id="faqAccordion">
                        <div class="faq-item">
                            <button class="faq-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                <i class="bi bi-question-circle text-success me-2"></i>
                                How do I create an account on AgriBazaar?
                                <i class="bi bi-chevron-down float-end"></i>
                            </button>
                            <div id="faq1" class="collapse" data-bs-parent="#faqAccordion">
                                <div class="p-3 pt-0 border-top">
                                    <p class="text-muted mb-0">Creating an account is simple! Click the "Register" button at the top of any page, choose whether you're a farmer or buyer, fill in your details, and verify your email address. You'll be ready to start buying or selling agricultural products immediately.</p>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="faq-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                <i class="bi bi-question-circle text-success me-2"></i>
                                What payment methods do you accept?
                                <i class="bi bi-chevron-down float-end"></i>
                            </button>
                            <div id="faq2" class="collapse" data-bs-parent="#faqAccordion">
                                <div class="p-3 pt-0 border-top">
                                    <p class="text-muted mb-0">We accept all major credit cards, debit cards, UPI payments, net banking, and digital wallets. For bulk orders, we also offer bank transfer options and payment terms for verified businesses.</p>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="faq-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                <i class="bi bi-question-circle text-success me-2"></i>
                                How long does delivery take?
                                <i class="bi bi-chevron-down float-end"></i>
                            </button>
                            <div id="faq3" class="collapse" data-bs-parent="#faqAccordion">
                                <div class="p-3 pt-0 border-top">
                                    <p class="text-muted mb-0">Delivery times vary by product and location. Most items are delivered within 3-7 business days. Fresh produce typically arrives within 1-3 days, while equipment may take 5-10 days. You'll receive tracking information once your order ships.</p>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="faq-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                <i class="bi bi-question-circle text-success me-2"></i>
                                Can I return products if I'm not satisfied?
                                <i class="bi bi-chevron-down float-end"></i>
                            </button>
                            <div id="faq4" class="collapse" data-bs-parent="#faqAccordion">
                                <div class="p-3 pt-0 border-top">
                                    <p class="text-muted mb-0">Yes! We offer a 30-day return policy on most products. Items must be in original condition and packaging. Fresh produce and perishables have different return terms. Visit our Returns Centre for detailed information and to start a return.</p>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="faq-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                <i class="bi bi-question-circle text-success me-2"></i>
                                How do I become a verified seller?
                                <i class="bi bi-chevron-down float-end"></i>
                            </button>
                            <div id="faq5" class="collapse" data-bs-parent="#faqAccordion">
                                <div class="p-3 pt-0 border-top">
                                    <p class="text-muted mb-0">To become a verified seller, complete your profile with business documents, provide quality certifications, and maintain good customer ratings. Verified sellers get priority listing, marketing support, and access to bulk order opportunities.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Support -->
    <section class="py-5 bg-success text-white">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-6 fw-bold">Still Need Help?</h2>
                <p class="lead opacity-90">Our support team is here to assist you</p>
            </div>

            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="contact-method">
                        <i class="bi bi-telephone text-success display-4 mb-3"></i>
                        <h5 class="text-success">Phone Support</h5>
                        <p class="text-muted mb-3">
                            <span class="status-indicator status-online"></span>Available Now
                        </p>
                        <p class="fw-bold text-dark">+91-9876543210</p>
                        <small class="text-muted">Mon-Sat: 9 AM - 8 PM</small>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="contact-method">
                        <i class="bi bi-envelope text-success display-4 mb-3"></i>
                        <h5 class="text-success">Email Support</h5>
                        <p class="text-muted mb-3">
                            <span class="status-indicator status-online"></span>Response within 4 hours
                        </p>
                        <p class="fw-bold text-dark">support@agribazaar.com</p>
                        <small class="text-muted">24/7 Support</small>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="contact-method">
                        <i class="bi bi-chat-dots text-success display-4 mb-3"></i>
                        <h5 class="text-success">Live Chat</h5>
                        <p class="text-muted mb-3">
                            <span class="status-indicator status-busy"></span>Average wait: 2 min
                        </p>
                        <button class="btn btn-success">Start Chat</button>
                        <small class="text-muted d-block mt-2">Available 24/7</small>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="contact-method">
                        <i class="bi bi-whatsapp text-success display-4 mb-3"></i>
                        <h5 class="text-success">WhatsApp</h5>
                        <p class="text-muted mb-3">
                            <span class="status-indicator status-online"></span>Quick Responses
                        </p>
                        <p class="fw-bold text-dark">+91-9876543210</p>
                        <small class="text-muted">Mon-Sat: 9 AM - 8 PM</small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Back to Home -->
    <div class="container text-center py-4">
        <a href="{% url 'home' %}" class="btn btn-outline-success btn-lg">
            <i class="bi bi-arrow-left me-2"></i>Back to Home
        </a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Search functionality
        document.getElementById('helpSearch').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const faqItems = document.querySelectorAll('.faq-item');
            
            faqItems.forEach(item => {
                const button = item.querySelector('.faq-button');
                const text = button.textContent.toLowerCase();
                
                if (text.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = searchTerm === '' ? 'block' : 'none';
                }
            });
        });

        // Update chevron icons for accordion
        document.querySelectorAll('[data-bs-toggle="collapse"]').forEach(button => {
            button.addEventListener('click', function() {
                const chevron = this.querySelector('.bi-chevron-down, .bi-chevron-up');
                const isCollapsed = this.classList.contains('collapsed');
                
                if (chevron) {
                    chevron.className = isCollapsed ? 'bi bi-chevron-down float-end' : 'bi bi-chevron-up float-end';
                }
            });
        });
    </script>
</body>
</html>

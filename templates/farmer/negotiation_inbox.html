{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Negotiation - Notification</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/negotiation_inbox.css' %}">
</head>
<body>
  <div class="container">
    <h2>Negotiation Inbox</h2>
    {% if inbox %}
    {% for message in inbox %}
      <div class="message-box">
        <p><strong>Product:</strong> {{ message.negotiation.product.productName }}</p>
        <p><strong>From:</strong> {{ message.sender.username }}</p>
        <p><strong>Message:</strong> {{ message.message }}</p>
        <p><strong>Sent:</strong> {{ message.timestamp }}</p>
        
        <form method="post" action="{% url 'send_negotiation_reply' message.id %}" class="reply-form">
          {% csrf_token %}
          <div class="mb-3">
            <textarea class="form-control" name="reply" rows="2" placeholder="Your reply..." required></textarea>
          </div>
          <div class="mb-3">
            <input class="form-control" type="number" step="0.01" name="proposed_price" placeholder="New proposed price">
          </div>
          <button type="submit" class="btn btn-primary">Reply</button>
        </form>
      </div>
    {% endfor %}
    {% else %}
          <p style="text-align:center; color:#6a1b9a;">No messages to show right now.</p>
    {% endif %}
  </div>
  
<script src="{% static 'javascript/negotiation_inbox.js' %}"></script>
</body>
</html>